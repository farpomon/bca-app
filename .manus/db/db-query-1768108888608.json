{
  "query": "-- Add companyId to project_scores if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'project_scores' AND COLUMN_NAME = 'companyId') = 0,\n  'ALTER TABLE project_scores ADD COLUMN companyId INT NULL',\n  'SELECT \"companyId already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;\n\n-- Add oldStatus to criteria_audit_log if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'criteria_audit_log' AND COLUMN_NAME = 'oldStatus') = 0,\n  'ALTER TABLE criteria_audit_log ADD COLUMN oldStatus ENUM(''active'',''disabled'',''deleted'') NULL',\n  'SELECT \"oldStatus already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;\n\n-- Add newStatus to criteria_audit_log if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'criteria_audit_log' AND COLUMN_NAME = 'newStatus') = 0,\n  'ALTER TABLE criteria_audit_log ADD COLUMN newStatus ENUM(''active'',''disabled'',''deleted'') NULL',\n  'SELECT \"newStatus already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;\n\n-- Add impactedProjects to criteria_audit_log if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'criteria_audit_log' AND COLUMN_NAME = 'impactedProjects') = 0,\n  'ALTER TABLE criteria_audit_log ADD COLUMN impactedProjects INT DEFAULT 0',\n  'SELECT \"impactedProjects already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2g8chP3aro94bni.root --database XnmtZZwX6e46H8JVZbq4Ta --execute -- Add companyId to project_scores if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'project_scores' AND COLUMN_NAME = 'companyId') = 0,\n  'ALTER TABLE project_scores ADD COLUMN companyId INT NULL',\n  'SELECT \"companyId already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;\n\n-- Add oldStatus to criteria_audit_log if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'criteria_audit_log' AND COLUMN_NAME = 'oldStatus') = 0,\n  'ALTER TABLE criteria_audit_log ADD COLUMN oldStatus ENUM(''active'',''disabled'',''deleted'') NULL',\n  'SELECT \"oldStatus already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;\n\n-- Add newStatus to criteria_audit_log if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'criteria_audit_log' AND COLUMN_NAME = 'newStatus') = 0,\n  'ALTER TABLE criteria_audit_log ADD COLUMN newStatus ENUM(''active'',''disabled'',''deleted'') NULL',\n  'SELECT \"newStatus already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;\n\n-- Add impactedProjects to criteria_audit_log if it doesn't exist\nSET @sql = IF((SELECT COUNT(*) FROM information_schema.COLUMNS \n  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'criteria_audit_log' AND COLUMN_NAME = 'impactedProjects') = 0,\n  'ALTER TABLE criteria_audit_log ADD COLUMN impactedProjects INT DEFAULT 0',\n  'SELECT \"impactedProjects already exists\" as message');\nPREPARE stmt FROM @sql;\nEXECUTE stmt;\nDEALLOCATE PREPARE stmt;",
  "rows": [
    {
      "message": "companyId already exists"
    }
  ],
  "messages": [],
  "stdout": "message\ncompanyId already exists\n",
  "stderr": "",
  "execution_time_ms": 1301
}