{
  "query": "CREATE TABLE IF NOT EXISTS risk_assessments (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  assessmentId INT NOT NULL,\n  pof DECIMAL(3, 2) NOT NULL,\n  pofJustification TEXT,\n  cof DECIMAL(3, 2) NOT NULL,\n  cofJustification TEXT,\n  riskScore DECIMAL(5, 2) NOT NULL,\n  riskLevel ENUM('very_low', 'low', 'medium', 'high', 'critical') NOT NULL,\n  assessedBy INT NOT NULL,\n  assessedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  reviewedBy INT,\n  reviewedAt TIMESTAMP NULL,\n  status ENUM('draft', 'approved', 'archived') DEFAULT 'draft' NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_assessment (assessmentId),\n  INDEX idx_risk_level (riskLevel),\n  INDEX idx_status (status)\n);\n\nCREATE TABLE IF NOT EXISTS pof_factors (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  riskAssessmentId INT NOT NULL,\n  age INT,\n  expectedUsefulLife INT,\n  remainingLifePercent DECIMAL(5, 2),\n  conditionIndex DECIMAL(5, 2),\n  defectSeverity ENUM('none', 'minor', 'moderate', 'major', 'critical'),\n  maintenanceFrequency ENUM('none', 'reactive', 'scheduled', 'preventive', 'predictive'),\n  lastMaintenanceDate TIMESTAMP NULL,\n  deferredMaintenanceYears INT,\n  operatingEnvironment ENUM('controlled', 'normal', 'harsh', 'extreme'),\n  utilizationRate DECIMAL(5, 2),\n  equipmentType VARCHAR(100),\n  manufacturer VARCHAR(255),\n  model VARCHAR(255),\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_risk_assessment (riskAssessmentId)\n);\n\nCREATE TABLE IF NOT EXISTS cof_factors (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  riskAssessmentId INT NOT NULL,\n  safetyImpact DECIMAL(3, 2) NOT NULL,\n  safetyNotes TEXT,\n  operationalImpact DECIMAL(3, 2) NOT NULL,\n  downtimeDays DECIMAL(5, 1),\n  affectedSystems TEXT,\n  operationalNotes TEXT,\n  financialImpact DECIMAL(3, 2) NOT NULL,\n  repairCost DECIMAL(15, 2),\n  revenueLoss DECIMAL(15, 2),\n  penaltyCost DECIMAL(15, 2),\n  financialNotes TEXT,\n  environmentalImpact DECIMAL(3, 2) NOT NULL,\n  environmentalNotes TEXT,\n  reputationalImpact DECIMAL(3, 2) NOT NULL,\n  reputationalNotes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_risk_assessment (riskAssessmentId)\n);\n\nCREATE TABLE IF NOT EXISTS critical_equipment (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  assessmentId INT NOT NULL UNIQUE,\n  criticalityLevel ENUM('critical', 'important', 'standard') NOT NULL,\n  criticalityJustification TEXT,\n  isSafetyRelated INT DEFAULT 0,\n  isMissionCritical INT DEFAULT 0,\n  isHighValue INT DEFAULT 0,\n  hasRedundancy INT DEFAULT 0,\n  mitigationStrategies TEXT,\n  contingencyPlan TEXT,\n  designatedBy INT NOT NULL,\n  designatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_criticality (criticalityLevel)\n);\n\nCREATE TABLE IF NOT EXISTS risk_mitigation_actions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  riskAssessmentId INT NOT NULL,\n  action TEXT NOT NULL,\n  actionType ENUM('inspection', 'maintenance', 'repair', 'replacement', 'monitoring', 'procedure_change', 'training') NOT NULL,\n  priority ENUM('immediate', 'high', 'medium', 'low') NOT NULL,\n  status ENUM('planned', 'in_progress', 'completed', 'cancelled') DEFAULT 'planned' NOT NULL,\n  assignedTo INT,\n  dueDate TIMESTAMP NULL,\n  completedDate TIMESTAMP NULL,\n  estimatedCost DECIMAL(15, 2),\n  actualCost DECIMAL(15, 2),\n  expectedRiskReduction DECIMAL(5, 2),\n  actualRiskReduction DECIMAL(5, 2),\n  effectiveness ENUM('not_effective', 'partially_effective', 'effective', 'highly_effective'),\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_risk_assessment (riskAssessmentId),\n  INDEX idx_status (status),\n  INDEX idx_priority (priority)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2g8chP3aro94bni.root --database XnmtZZwX6e46H8JVZbq4Ta --execute CREATE TABLE IF NOT EXISTS risk_assessments (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  assessmentId INT NOT NULL,\n  pof DECIMAL(3, 2) NOT NULL,\n  pofJustification TEXT,\n  cof DECIMAL(3, 2) NOT NULL,\n  cofJustification TEXT,\n  riskScore DECIMAL(5, 2) NOT NULL,\n  riskLevel ENUM('very_low', 'low', 'medium', 'high', 'critical') NOT NULL,\n  assessedBy INT NOT NULL,\n  assessedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  reviewedBy INT,\n  reviewedAt TIMESTAMP NULL,\n  status ENUM('draft', 'approved', 'archived') DEFAULT 'draft' NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_assessment (assessmentId),\n  INDEX idx_risk_level (riskLevel),\n  INDEX idx_status (status)\n);\n\nCREATE TABLE IF NOT EXISTS pof_factors (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  riskAssessmentId INT NOT NULL,\n  age INT,\n  expectedUsefulLife INT,\n  remainingLifePercent DECIMAL(5, 2),\n  conditionIndex DECIMAL(5, 2),\n  defectSeverity ENUM('none', 'minor', 'moderate', 'major', 'critical'),\n  maintenanceFrequency ENUM('none', 'reactive', 'scheduled', 'preventive', 'predictive'),\n  lastMaintenanceDate TIMESTAMP NULL,\n  deferredMaintenanceYears INT,\n  operatingEnvironment ENUM('controlled', 'normal', 'harsh', 'extreme'),\n  utilizationRate DECIMAL(5, 2),\n  equipmentType VARCHAR(100),\n  manufacturer VARCHAR(255),\n  model VARCHAR(255),\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_risk_assessment (riskAssessmentId)\n);\n\nCREATE TABLE IF NOT EXISTS cof_factors (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  riskAssessmentId INT NOT NULL,\n  safetyImpact DECIMAL(3, 2) NOT NULL,\n  safetyNotes TEXT,\n  operationalImpact DECIMAL(3, 2) NOT NULL,\n  downtimeDays DECIMAL(5, 1),\n  affectedSystems TEXT,\n  operationalNotes TEXT,\n  financialImpact DECIMAL(3, 2) NOT NULL,\n  repairCost DECIMAL(15, 2),\n  revenueLoss DECIMAL(15, 2),\n  penaltyCost DECIMAL(15, 2),\n  financialNotes TEXT,\n  environmentalImpact DECIMAL(3, 2) NOT NULL,\n  environmentalNotes TEXT,\n  reputationalImpact DECIMAL(3, 2) NOT NULL,\n  reputationalNotes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_risk_assessment (riskAssessmentId)\n);\n\nCREATE TABLE IF NOT EXISTS critical_equipment (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  assessmentId INT NOT NULL UNIQUE,\n  criticalityLevel ENUM('critical', 'important', 'standard') NOT NULL,\n  criticalityJustification TEXT,\n  isSafetyRelated INT DEFAULT 0,\n  isMissionCritical INT DEFAULT 0,\n  isHighValue INT DEFAULT 0,\n  hasRedundancy INT DEFAULT 0,\n  mitigationStrategies TEXT,\n  contingencyPlan TEXT,\n  designatedBy INT NOT NULL,\n  designatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_criticality (criticalityLevel)\n);\n\nCREATE TABLE IF NOT EXISTS risk_mitigation_actions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  riskAssessmentId INT NOT NULL,\n  action TEXT NOT NULL,\n  actionType ENUM('inspection', 'maintenance', 'repair', 'replacement', 'monitoring', 'procedure_change', 'training') NOT NULL,\n  priority ENUM('immediate', 'high', 'medium', 'low') NOT NULL,\n  status ENUM('planned', 'in_progress', 'completed', 'cancelled') DEFAULT 'planned' NOT NULL,\n  assignedTo INT,\n  dueDate TIMESTAMP NULL,\n  completedDate TIMESTAMP NULL,\n  estimatedCost DECIMAL(15, 2),\n  actualCost DECIMAL(15, 2),\n  expectedRiskReduction DECIMAL(5, 2),\n  actualRiskReduction DECIMAL(5, 2),\n  effectiveness ENUM('not_effective', 'partially_effective', 'effective', 'highly_effective'),\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_risk_assessment (riskAssessmentId),\n  INDEX idx_status (status),\n  INDEX idx_priority (priority)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1116
}